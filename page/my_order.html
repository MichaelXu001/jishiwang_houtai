<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>我的订单</title>
    <link rel="stylesheet" href="./../css/common.css">
    <link rel="stylesheet" href="./../css/style.css">
    <link rel="stylesheet" href="./../css/laypage.css">

</head>

<body>
    <div class="nav">
        <div class="leftgroup">
            <div class="logo" id="logo">
                <a href="./index.html"></a>
            </div>
            <div class="telescopic shrink" id="telescopic"><img src="./../images/zd.png" alt=""></div>
        </div>
        <div class="rightgroup">
            <ul>
                <li class="name"><a href="">旭阳科技</a></li>
                <li class="intentionOrder"><a href="">意向单</a></li>
                <li class="legalService"><a href="">法律服务</a></li>
                <li class="quit" id="quit"><a href="javascript:void(0);">退出</a></li>
            </ul>
            <div class="namePic"><img alt=""></div>
        </div>
    </div>
    <div class="main">
        <div class="container">
            <div class="rightMain" id="rightMain">
                <div class="projectType" id="projectType">
                    <ul>
                        <li class="active" data_status="0">全部订单</li>
                        <li data_status="1">已付款</li>
                        <li data_status="2">待付款</li>
                        <li data_status="3">未发货</li>
                        <li data_status="4">待接收</li>
                        <li data_status="5">已完成</li>
                    </ul>
                    <div class="searchBox">
                        <div class="searchBtn"></div>
                        <input type="text" placeholder="搜索" class="searchInput" id="searchInput">
                    </div>
                </div>
                <!-- <ul class="orderType">
                <li class="active">全部类型</li>
                <li>机械施工一体化</li>
                <li>工程机械厂家</li>
                <li>工程机械租赁</li>
            </ul> -->
                <div class="OrderList" id="OrderLists" style="padding-top:20px;margin-top:15px;">
                    <!-- <div class="everyList">
                        <div class="topInfor">
                            <div class="firstInfor fl">
                                <div class="times fl">2017-08-24 12:00:00</div>
                                <div class="orderId fl">订单号：<span>12332212</span></div>
                                <div class="brandName fl">阿特拉斯佳斯公司（北京）</div>
                            </div>
                            <div class="secondInfor fr">
                                买家：<span>张先生 13232323987 5787654567@qq.com</span>
                            </div>
                        </div>
                        <div class="goodsInfor">
                            <div class="goodsImg fl"><img src="./../images/1.jpg" alt=""></div>
                            <div class="goodsName fl">YTG786大汽车</div>
                            <div class="goodsModel fl">AXCDS210</div>
                            <div class="goodsNumber fl">*2</div>
                            <div class="goodsPrice fl">¥1234500</div>
                            <div class="goodsBtn fl">
                                <p>确认</p>
                            </div>
                        </div>
                        <div class="comment">留言：
                            <span>那个你噶刚发广告那个你噶刚发广告刚刚发给q2发广q2发广告那个你噶刚发广告刚刚发给q2发广q2发广告那个你噶刚发广告刚刚发给q2发广</span>
                            <div class="stateBox">
                                <em>订单状态</em>
                                <ul class="state">
                                    <li><span>订单生成时间:</span><em>2017-09-29 13:45</em></li>
                                    <li><span>买家确认时间:</span><em>2017-09-29 13:45</em></li>
                                    <li><span>发货时间:</span><em>2017-09-29 13:45</em></li>
                                    <li><span>预计收货时间:</span><em>2017-09-29 13:45</em></li>
                                    <li><span>收货时间:</span><em>2017-09-29 13:45</em></li>
                                </ul>
                            </div>
                        </div>
                    </div> -->

                </div>
                <div style="height:32px;margin-bottom:0px;background: #f6f6f6;"></div>
                <div class="pageBox">
                    <div id="page"></div>
                </div>
            </div>
        </div>
        <div class="leftMenu" id="leftMenu">
            <ul>
                <li class="UserCenter">
                    <span><img src="./../images/center.png" alt=""></span>
                    <a href="./index.html">用户中心首页</a>
                </li>
                <li class="myIntentionOrder">
                    <span><img src="./../images/IntentionOrder.png" alt=""></span>
                    <a href="./my_intention_order.html?type=000&status=3">我的意向单</a>
                </li>
                <li class="myOrder active">
                    <span><img src="./../images/order.png" alt=""></span>
                    <a href="./my_order.html?status=0">我的订单</a>
                </li>
                <li class="myShoppingCart">
                    <span><img src="./../images/ShoppingCart.png" alt=""></span>
                    <a href="./my_shopping_cart.html">我的购物车</a>
                </li>
                <li class="myCollection">
                    <span><img src="./../images/Collection.png" alt=""></span>
                    <a href="./my_collection.html?type=000">我的收藏</a>
                </li>
                <li class="customerService">
                    <span><img src="./../images/customer.png" alt=""></span>
                    <a href="">客户服务</a>
                </li>
                <li class="userSettings">
                    <span><img src="./../images/setting.png" alt=""></span>
                    <a href="./user_settings.html">用户设置</a>
                </li>
            </ul>
        </div>

    </div>


    <script src="./../js/jquery.min.js"></script>
    <script src="./../js/common.js"></script>
    <script src="./../js/laypage.js"></script>

    <script>
        var funObj = {
            InterfaceObj: {
                getorders: "http://39.108.191.122/Consumer/Orders/getorders", //订单
            },
            urlparameter: {
                status: common.Geturl("status"),
                fenye: location.hash.replace('#!fenye=', '')
            },
            inits: function() {
                this.filterOrderFun();

            },
            filterOrderFun: function() {
                var getordersObj = {};
                getordersObj.status = 1; //暂时传1或2 funObj.urlparameter.status;
                getordersObj.page = 1;
                if (funObj.urlparameter.fenye != "") {
                    getordersObj.page = funObj.urlparameter.fenye;
                };
                funObj.everyOrderFun(getordersObj);

                $("#projectType").on("click", "li", function() {
                    getordersObj.status = $(this).attr("data_status");
                    getordersObj.page = 1;
                    $(this).addClass("active").siblings("li").removeClass("active");
                    funObj.everyOrderFun(getordersObj);
                    var state = {
                        'page_id': 1,
                        'user_id': 5
                    };
                    var title = 'Hello World';
                    var url = '?status=' + getordersObj.status;
                    history.pushState(state, title, url);
                });

            },
            everyOrderFun: function(getordersObj) {

                common.ajaxFun(funObj.InterfaceObj.getorders, "GET", getordersObj, function(res) {
                    if (res.status == -1) {
                        alert("查询意向单接口出错了")
                    } else if (res.status == 1) {
                        console.log(res)
                        common.getordersStr(res, $("#OrderLists"), false);
                        common.laypageFun(res.count, getordersObj, funObj.InterfaceObj.getorders, 3);
                    } else if (res.status == -2) {
                        var str = '<div class="noContent" id="noContent">没有相关产品</div>';
                        $("#OrderLists").html($(str));
                    }
                });
            }
        }
        funObj.inits();
    </script>
</body>

</html>